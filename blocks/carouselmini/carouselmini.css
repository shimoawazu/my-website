/* ===== carouselmini =====
   ・imagelink の左ヒーロー幅に合わせて横幅を自動調整（JSが --carouselmini-width を注入）
   ・表示枚数: PC=3 / Tablet=2 / Mobile=1
   ・各カードは左ヒーローと同じアスペクト比（--hero-ratio）でトリミング
*/
.carouselmini {
  --carouselmini-gap: 12px;
  --carouselmini-radius: 12px;
  --carouselmini-bg: #ffffff;

  /* JSが注入する幅。なければ100% */
  width: min(100%, var(--carouselmini-width, 100%));
  margin: 0; /* 左寄せ */
}

/* ビューポート（はみ出しを隠す） */
.carouselmini .carouselmini-viewport {
  position: relative;
  overflow: hidden; /* ナビを重ねるので隠す */
}

/* スライド行（実体は「カードの横並びリスト」） */
.carouselmini .carouselmini-slides {
  display: flex;
  gap: var(--carouselmini-gap);
  margin: 0;
  padding: 0;
  list-style: none;

  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  overflow-x: auto;
  overscroll-behavior-x: contain;
}

/* スクロールバー隠し（WebKit） */
.carouselmini .carouselmini-slides::-webkit-scrollbar { display: none; }

/* 表示列数（デフォ1、600px以上で2、900px以上で3） */
.carouselmini { --carouselmini-cols: 1; }
@media (min-width: 600px) { .carouselmini { --carouselmini-cols: 2; } }
@media (min-width: 900px) { .carouselmini { --carouselmini-cols: 3; } }

/* 各アイテム幅を自動計算（gapも考慮して等分） */
.carouselmini .carouselmini-item {
  flex: 0 0 calc(
    (100% - (var(--carouselmini-gap) * (var(--carouselmini-cols) - 1)))
    / var(--carouselmini-cols)
  );
  scroll-snap-align: start;
}

/* カード本体（左ヒーローと同じ比率にする：--hero-ratio はJSが注入、なければ16:9） */
.carouselmini .carouselmini-frame {
  position: relative;
  width: 100%;
  aspect-ratio: var(--hero-ratio, 16/9);
  background: var(--carouselmini-bg);
  border-radius: var(--carouselmini-radius);
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0 0 0 / 6%);
}

.carouselmini .carouselmini-frame a {
  display: block;
  width: 100%;
  height: 100%;
  color: inherit;
  text-decoration: none;
}

.carouselmini .carouselmini-frame picture,
.carouselmini .carouselmini-frame img {
  display: block;
  width: 100%;
  height: 100%;
}

.carouselmini .carouselmini-frame img {
  object-fit: cover; /* きれいにトリミング */
}

/* ナビボタン（左右） */
.carouselmini .carouselmini-nav {
  position: absolute;
  inset: 0;
  pointer-events: none; /* ボタン以外はクリック透過 */
}

.carouselmini .carouselmini-nav button {
  pointer-events: auto;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 0;
  margin: 0;
  padding: 0;
  background-color: rgba(19 19 19 / 25%);
  transition: background-color .2s;
}

.carouselmini .carouselmini-nav button:hover,
.carouselmini .carouselmini-nav button:focus-visible {
  background-color: rgba(19 19 19 / 75%);
}

.carouselmini .carouselmini-nav .prev { left: 8px; }
.carouselmini .carouselmini-nav .next { right: 8px; }

.carouselmini .carouselmini-nav button::after {
  display: block;
  content: '';
  border: 2px solid #fff;
  border-bottom: 0;
  border-left: 0;
  height: 12px;
  width: 12px;
  position: absolute;
  top: 50%;
  left: calc(50% + 2px);
  transform: translate(-50%, -50%) rotate(-135deg);
}
.carouselmini .carouselmini-nav .next::after {
  transform: translate(-50%, -50%) rotate(45deg);
  left: calc(50% - 2px);
}

/* 余白調整（ブロック間） */
.carouselmini { margin-block: 16px; }
